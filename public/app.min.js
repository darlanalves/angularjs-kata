!function(){var t=angular.module("todo",["ui.router"]);t.config(["$stateProvider",function(t){var e={index:{url:"",controller:"HomeController",templateUrl:"/home.html"},"task-list":{url:"/tasks",templateUrl:"/task/list.html",controller:"TaskListController"},"task-create":{url:"/tasks/new",templateUrl:"/task/create.html",controller:"TaskCreateController"},"task-edit":{url:"/tasks/:taskId",templateUrl:"/task/edit.html",controller:"TaskEditController"}};angular.forEach(e,function(e,n){t.state(n,e)})}]),t.controller("HomeController",["$scope","TaskService",function(t,e){e.findAll().then(function(e){t.tasks=e},function(){t.tasks=[]})}]),t.controller("TaskCreateController",["$scope","TaskService",function(t,e){t.task={},t.saveTask=function(n){n&&n.$invalid||e.save(t.task).then(function(e){t.task=e,n&&n.$setPristine()})}}]),t.controller("TaskEditController",["$scope","TaskService","$stateParams",function(t,e,n){t.task=e.findOne(n.taskId)}]),t.controller("TaskListController",["$scope","TaskService",function(t,e){e.findAll().then(function(e){t.taskList=e}),t.updateTask=function(t){e.save(t)}}]),t.service("TaskService",["$http",function(t){function e(t){var e=angular.copy(t),n="$$";for(var r in e)r.slice(0,2)===n&&delete e[r];return e}return{findAll:function(){return t.get("/api/task").then(function(t){return t.data})},findOne:function(e){return t.get("/api/task/"+e).then(function(t){return t.data||{}})},save:function(n){n=e(n);var r=n.id?"put":"post",a="/api/task"+(n.id?"/"+n.id:"");return t[r](a,JSON.stringify(n)).then(function(t){return t.data||{}})},remove:function(e){return t.delete("/api/task/"+e)}}}])}();